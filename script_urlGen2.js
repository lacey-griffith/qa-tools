let client_brands = [
    /* NBLY */
    {
    brand_handle: 'aire-serve',
    brand: 'ASV',
    conceptID: 3,
    prod: 'https://www.aireserv.com/',
    stage: 'https://dig-www-nei-asv-stage.nblytest.com/',
    neighborly: true,
    prod_local_homepage:'https://www.aireserv.com/jacksonville',
    staging_local_homepage:'https://dig-www-nei-asv-stage.nblytest.com/jacksonville',
    active_client: true
}, {
    brand_handle: 'five-star-painting',
    brand: 'FSP',
    conceptID: 4,
    prod: 'https://www.fivestarpainting.com/',
    stage: 'https://dig-www-nei-fsp-stage.nblytest.com/',
    neighborly: true,
    prod_local_homepage:'https://www.fivestarpainting.com/lagrange/',
    staging_local_homepage:'https://dig-www-nei-fsp-stage.nblytest.com/lagrange',
    active_client: true
}, {
    brand_handle: 'grounds-guys',
    brand: 'GUY',
    conceptID: 6,
    prod: 'https://www.groundsguys.com/',
    stage: 'https://dig-www-nei-guy-stage.nblytest.com/',
    neighborly: true,
    prod_local_homepage:'https://www.groundsguys.com/sparksnv/',
    staging_local_homepage:'https://dig-www-nei-guy-stage.nblytest.com/sparksnv',
    active_client: true
}, {
    brand_handle: 'glass-doctor',
    brand: 'MDG',
    conceptID: 5,
    prod: 'https://www.glassdoctor.com/',
    stage: 'https://develop-dwyr-mdg.pantheonsite.io/',
    neighborly: true,
    prod_local_homepage:'https://www.glassdoctor.com/chelmsford',
    staging_local_homepage:'https://develop-dwyr-mdg.pantheonsite.io/chelmsford/'
}, {
    brand_handle: 'molly-maid',
    brand: 'MLY',
    conceptID: 1,
    prod: 'https://www.mollymaid.com/',
    stage: 'https://dig-www-nei-mly2-stage.nblytest.com/',
    neighborly: true,
    prod_local_homepage:'https://www.mollymaid.com/chelmsford/',
    staging_local_homepage:'https://dig-www-nei-mly2-stage.nblytest.com/chelmsford/',
    active_client: true
}, {
    brand_handle: 'mr-appliance',
    brand: 'MRA',
    conceptID: 8,
    prod: 'https://www.mrappliance.com/',
    stage: 'https://dig-www-nei-mra-stage.nblytest.com/',
    neighborly: true,
    prod_local_homepage:'https://www.mrappliance.com/indianapolis/',
    staging_local_homepage:'https://dig-www-nei-mra-stage.nblytest.com/indianapolis/'
}, {
    brand_handle: 'mr-electric',
    brand: 'MRE',
    conceptID: 9,
    prod: 'https://mrelectric.com/',
    stage: 'https://dig-www-nei-mre2.nblyprod.com/',
    neighborly: true,
    prod_local_homepage:'https://mrelectric.com/san-antonio',
    staging_local_homepage:'https://dig-www-nei-mre2.nblyprod.com/san-antonio',
    active_client: true
}, {
    brand_handle: 'mr-handyman',
    brand: 'MRH',
    conceptID: 2,
    prod: 'https://www.mrhandyman.com/',
    stage: 'https://dig-www-nei-mrh-stage.nblytest.com/',
    neighborly: true,
    prod_local_homepage:'https://www.mrhandyman.com/south-essex-county/',
    staging_local_homepage:'https://dig-www-nei-mrh-stage.nblytest.com/south-essex-county/'
}, {
    brand_handle: 'mr-rooter',
    brand: 'MRR',
    conceptID: 10,
    prod: 'https://www.mrrooter.com/',
    stage: 'https://dig-www-nei-mrr-stage.nblytest.com/',
    neighborly: true,
    prod_local_homepage:'https://www.mrrooter.com/austin',
    staging_local_homepage:'https://dig-www-nei-mrr-stage.nblytest.com/austin',
    active_client: true
},{
    brand_handle: 'window-genie',
    brand: 'WDG',
    conceptID: 16,
    prod: 'https://www.windowgenie.com/',
    stage: 'https://dig-www-nei-wdg2-stage.nblytest.com/',
    neighborly: true,
    prod_local_homepage:'https://www.windowgenie.com/west-austin',
    staging_local_homepage:'https://dig-www-nei-wdg2-stage.nblytest.com/west-austin',
    active_client: true
},{
    brand_handle: 'adm',
    brand: 'ADM',
    conceptID: 0,
    prod: 'https://www.adm.com/',
    stage: '',
    neighborly: false,
    active_client: true
},{
    brand_handle: 'sun-home-saunas',
    brand: 'Sun Home Saunas',
    conceptID: 0,
    prod: 'https://www.sunhomesaunas.com/',
    stage: '',
    neighborly: false,
    active_client: true
},{
    brand_handle: 'yoga-works',
    brand: 'Yoga Works',
    conceptID: 0,
    prod: 'https://yogaworks.com/',
    stage: '',
    neighborly: false,
    active_client: false
},{
    brand_handle: 'lights-fest',
    brand: 'Lights Festival',
    conceptID: 0,
    prod: 'https://www.thelightsfest.com/',
    stage: '',
    neighborly: false,
    active_client: true
},{
    brand_handle: 'lancer-skincare',
    brand: 'Lancer',
    conceptID: 0,
    prod: 'https://www.lancerskincare.com/',
    stage: '',
    neighborly: false,
    active_client: true
},{
    brand_handle: 'lexie-hearing',
    brand: 'Lexie Hearing',
    conceptID: 0,
    prod: 'https://www.lexiehearing.com/us',
    stage: '',
    neighborly: false,
    active_client: false
},{
    brand_handle: 'go-hearing',
    brand: 'Go Hearing',
    conceptID: 0,
    prod: 'https://www.gohearing.com/',
    stage: '',
    neighborly: false,
    active_client: false
},{
    brand_handle: '1up-nutrition',
    brand: '1UP',
    conceptID: 0,
    prod: 'https://www.1upnutrition.com/',
    stage: '',
    neighborly: false,
    active_client: true
},{
    brand_handle: 'emler-swim-school',
    brand: 'Emler',
    conceptID: 0,
    prod: 'https://www.emlerswimschool.com/',
    stage: '',
    neighborly: false,
    active_client: true
},{
    brand_handle: 'fresh-pressed-olive-oil',
    brand: 'FPOO',
    conceptID: 0,
    prod: 'https://www.freshpressedoliveoil.com/',
    stage: '',
    neighborly: false,
    active_client: true
},{
    brand_handle: 'moon-juice',
    brand: 'Moon Juice',
    conceptID: 0,
    prod: 'https://www.moonjuice.com/',
    stage: '',
    neighborly: false,
    active_client: true
},{
    brand_handle: 'spot-loan',
    brand: 'Spot Loan',
    conceptID: 0,
    prod: 'https://www.spotloan.com/',
    stage: '',
    neighborly: false,
    active_client: true
}];

let nblyForm = `<div class='nbly-form'>
                    <div>
                        <div class="form-group checkbox-container">
                            <input type="checkbox" id="local-pages" name="local-pages">
                            <label for="local-pages">Local Pages</label>
                        </div>
                        <div class="form-group checkbox-container">
                            <input type="checkbox" id="national-pages" name="national-pages">
                            <label for="national-pages">National Pages</label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="prod-url">Prod URL:</label>
                        <input type="text" id="prod-url" name="prod-url" placeholder="Enter Prod URL">
                    </div>

                    <div class="form-group">
                        <label for="staging-url">Staging URL:</label>
                        <input type="text" id="staging-url" name="staging-url" placeholder="Enter Staging URL">
                    </div>

                    <div class="form-group">
                        <label for="qa-param">QA Parameter:</label>
                        <input type="text" id="qa-param" name="qa-param" placeholder="Enter QA Parameter">
                    </div>

                    <div id="variation-group-container">
                        <div class="variation-group">
                            <label for="variation-og">OG:</label>
                            <input type="text" id="variation-og" name="variation-live-qa[]"
                                placeholder="Enter Preview Link">
                        </div>

                        <div class="variation-group">
                            <label for="variation-1">V1:</label>
                            <input type="text" id="variation-1" name="variation-live-qa[]"
                                placeholder="Enter Preview Link">
                        </div>
                        <button class="btn add-var" type="button" onclick="addVariationInput()">+</button>
                    </div>
                    <button class="btn" id="clear-button">Clear</button>
                    <button class="btn" type="button" onclick="generateUrls()">Generate</button>
                </div>`;

let regForm = `
        <div class='reg-form'>
                    <div class="form-group">
                        <label for="url">URL:</label>
                        <input type="text" id="url" name="url" placeholder="Enter URL">
                    </div>

                    <div class="form-group">
                        <label for="qa-param">QA Parameter:</label>
                        <input type="text" id="qa-param" name="qa-param" placeholder="Enter QA Parameter">
                    </div>

                    <div id="variation-group-container">
                        <div class="variation-group">
                            <label for="variation-og">OG:</label>
                            <input type="text" id="variation-og" name="variation-live-qa[]"
                                placeholder="Enter Preview Link">
                        </div>

                        <div class="variation-group">
                            <label for="variation-1">V1:</label>
                            <input type="text" id="variation-1" name="variation-live-qa[]"
                                placeholder="Enter Preview Link">
                        </div>
                        <button class="btn add-var" type="button" onclick="addVariationInput()">+</button>
                    </div>
                    <button class="btn" id="clear-button">Clear</button>
                    <button class="btn" type="button" onclick="generateUrls()">Generate</button>
                </div>`;

(function() {
    function addSteps(){
        //target parent container
        let container = $('section#url-gen');
        container.addClass('step-container');

        //add brand btn contaiiner
        container.append(`<h4>QA URL Generator</h4>
            <div id='form' class='form-option'>
            <div class='tool-inner'>
                <div id='stepOne' class=''>
                    <h2>Choose Client:</h2>
                    <div class='brand-btn-container initial'></div>
                </div>
                <div class='url-generator-inner tool-body transparent-background'></div>
            </div>
        </div>
        <div id="output" class="output" ></div>`);

        //build button for each active brand
        client_brands.forEach(function(item, i){
            //skip inactive clients
            if(!item.active_client){
                return;
            }
            let btn = `<button data-handle='${item.brand_handle}' data-neighborly=${item.neighborly}>${item.brand}</button>`;
            $('#stepOne .brand-btn-container').append(btn);
        });

        //send user to step 2 on button click
        $('#stepOne button').on('click', function(){
            $('.brand-btn-container').removeClass('initial');
            let handle = $(this).attr('data-handle');

            //remove active class from other buttons
            if(!$(this).hasClass('active')){
                $('#stepOne button.active').removeClass('active');
                $(this).addClass('active');
            }

            //build forms
            buildForm(handle);

            //determine which form to show
            let brand = client_brands.find(brand => brand.brand_handle === handle);
            //showForm(handle, brand.neighborly);
        });
    }

    function buildForm(handle){
        console.log(handle)
        let activeBrand = client_brands.find(brand => brand.brand_handle === handle);
        let markUp = ``;

        console.log(activeBrand)
        //if brand.neighborly is true
        if(activeBrand.neighborly){
            markUp = nblyForm;
            //if brand.neighborly is false
        } else if(!activeBrand.neighborly){
            markUp = regForm;
        }

        $('#form .tool-body').removeClass('transparent-background');
        $('#form .tool-body').html(markUp);
    }

    document.addEventListener('DOMContentLoaded', function(e) {
        addSteps();
    });
})();